<div class="box" th:fragment="body">
	<div class="box-header">
		<h3 class="box-title" th:text="#{menu.file}"></h3>
	</div>

	<div class="box-body">
		<form action="/file/upload" id="fileForm" method="post" th:object="${file}" enctype="multipart/form-data">

			<div class="form-group">
				<label class="col-4 col-form-label" th:text=#{file.title} id="file-label" for="myFile">Arquivo</label>
				<div class="col-8">
					<input required="true" type="file" th:onclick="'javascript:setAction()'" name="myFile" id="myFile" class="form-control-file" multiple>
				</div>
			</div>

			<div class="form-group">
				<div class="offset-4 col-8">
					<button name="button" type="submit" th:text="#{file.upload}" class="btn btn-primary pull-right">Upload</button>
				</div>
			</div>
		</form>
		<script>
			var entity = window.location.pathname.split('/')[1];
			if (entity === 'case')
				entity = 'caso'
			function getAction(){
				return "/file/upload/" + entity;
			}
			function setEntity(){
				var input = document.getElementById("entity");

				input.setAttribute("name", entity);
			}
			function setAction(){
				var form = document.getElementById("fileForm");
				form.setAttribute("action", getAction());
				setEntity();
			}

		</script>
	</div>

</div>